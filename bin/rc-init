#!/bin/bash

DAEMONS=($(ls /etc/rc.d))

red='\e[0;31m'      #Red
green='\e[0;32m'    #Green
yellow='\e[0;33m'   #Yellow
blue='\e[0;34m'     #Blue
purple='\e[0;35m'   #Purple
cyan='\e[0;36m'     #Cyan
gray='\e[0;37m'     #Gray
reset='\e[0m' 	  #Reset color

dprint() {
	echo -e ${red}$@
}

eprint() {
	echo -e ${green}$@
}

rc_status() {
	
	for daemon in ${DAEMONS[@]}; do
		if [ -x /etc/rc.d/$daemon ]; then
			eprint "$daemon"
		else
			dprint "$daemon"
		fi
	done

}

rc_enable() {
	
	if [ -f /etc/rc.d/$1 ]; then
		chmod +x /etc/rc.d/$1 && eprint "$1 enabled"
	fi
	
}

rc_disable() {
	
	if [ -f /etc/rc.d/$1 ]; then
		chmod -x /etc/rc.d/$1 && dprint "$1 disabled"
	fi
	
}

help() {
	
	cat << EOF
rc-init control script

usage:
  rc [ <option> <arguments> ]
		
options:
  status            check all daemon's status
  enable <daemon>   enable daemon
  disable <daemon>  disable daemon
	
EOF

}

while [ $1 ]; do
	case $1 in
		status)
			rc_status
			exit 0
			;;
		enable)
			while [ $2 ]; do
				rc_enable $2
				shift
			done
			;;
		disable)
			while [ $2 ]; do
				rc_disable $2
				shift
			done
			;;
		*)
			help
			exit 0
			;;
	esac
	shift
done

exit 0
